!function(e,t){if("function"==typeof define&&define.amd)define("ppr.config",["module","exports","lodash"],t);else if("undefined"!=typeof exports)t(module,exports,require("lodash"));else{var n={exports:{}};t(n,n.exports,e._),e.pprConfig=n.exports}}(this,function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var f=o(n),u={};t["default"]={get:function(e,t){return f["default"].result(u,e,t)},getAll:function(){return u},set:function(e,t){var n=e;"string"==typeof e&&(n={},n[e]=t),f["default"].each(n,function(e,t){f["default"].set(u,t,e)})},reset:function(){u={}}},e.exports=t["default"]});
!function(e,t){if("function"==typeof define&&define.amd)define("ppr.library.eventbusprototype",["module","exports","lodash","ppr.config"],t);else if("undefined"!=typeof exports)t(module,exports,require("lodash"),require("ppr.config"));else{var n={exports:{}};t(n,n.exports,e._,e.pprConfig),e.pprLibraryEventbusprototype=n.exports}}(this,function(e,t,n,s){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n),a=i(s),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),f=function(){function e(){u(this,e),this.eventList={},this.messageIndex={}}return o(e,[{key:"getEvents",value:function(){return this.eventList}},{key:"getEventsByMessage",value:function(e){return"undefined"!=typeof this.eventList[e]?this.eventList[e]:{}}},{key:"getEventsByScope",value:function(e){var t={};return r["default"].each(this.getEvents(),function(n,s){var i={};r["default"].each(n,function(t,n){r["default"].isEqual(t.scope,e)&&(i[n]=t)}),Object.keys(i).length>0&&(t[s]=i)}),t}},{key:"subscribe",value:function(t,n,s,i){"undefined"==typeof this.eventList[n]&&(this.eventList[n]={});var u=r["default"].uniqueId(n);return e.log("subscribe",n,u,t),this.eventList[n][u]={scope:t,callback:s,name:i||u},this.messageIndex[u]=n,u}},{key:"unsubscribe",value:function(t){var n=this,s=t;return"string"==typeof s&&(s=[s]),r["default"].each(s,function(t){if("undefined"!=typeof n.messageIndex[t]){var i=n.messageIndex[t];e.log("unsubscribe",i,s),"undefined"!=typeof n.eventList[i][t]&&(delete n.eventList[i][t],0===r["default"].keys(n.eventList[i]).length&&delete n.eventList[i])}}),!0}},{key:"unsubscribeByScopeAndMessage",value:function(e,t){var n=this.getEventsByScope(e);return!!Object.prototype.hasOwnProperty.call(n,t)&&this.unsubscribe(Object.keys(n[t]))}},{key:"unsubscribeByScope",value:function(e){var t=this;return Object.keys(this.getEventsByScope(e)).map(function(n){return t.unsubscribeByScopeAndMessage(e,n)})}},{key:"publish",value:function(e){if("undefined"==typeof this.eventList[e])return!1;for(var t=arguments.length,n=Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return this.publishTo.apply(this,[r["default"].map(this.eventList[e],"name"),e].concat(n))}},{key:"publishTo",value:function(t,n){for(var s=arguments.length,i=Array(s>2?s-2:0),u=2;u<s;u++)i[u-2]=arguments[u];var a=t;return"undefined"!=typeof this.eventList[n]&&("string"==typeof a&&(a=[a]),a=r["default"].filter(this.eventList[n],function(e){return r["default"].indexOf(a,e.name)>-1}),e.log("publish",n,i,r["default"].map(a,"scope")),r["default"].each(a,function(e){e.callback.apply(e.scope,i)}),!0)}}],[{key:"log",value:function(e,t){if(a["default"].get("event_bus.debug",!1)===!0){for(var n=arguments.length,s=Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i];switch(e){case"subscribe":break;case"unsubscribe":break;case"publish":}}}}]),e}();t["default"]=f,e.exports=t["default"]});
!function(e,t){if("function"==typeof define&&define.amd)define("ppr.library.utils.loader",["module","exports","lodash","ppr.config"],t);else if("undefined"!=typeof exports)t(module,exports,require("lodash"),require("ppr.config"));else{var i={exports:{}};t(i,i.exports,e._,e.pprConfig),e.pprLibraryUtilsLoader=i.exports}}(this,function(e,t,i,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(i),f=n(o),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t["default"]={isInitialized:!1,configList:{supportAMD:!0,supportCommon:!0},hasAMDSupport:function(){return this.configList.supportAMD===!0&&"function"==typeof define&&define.amd},initialize:function(){this.configList=r["default"].extend(this.configList,f["default"].get("universal_loader",{})),this.isInitialized=!0},load:function(e,t,i){this.isInitialized||this.initialize();var o=e;if("function"!=typeof i)throw new Error("Callback has to present");"object"!==("undefined"==typeof o?"undefined":u(o))&&(o=[o]);var n=[];return this.hasAMDSupport()?(t.custom===!0&&(o=r["default"].map(o,function(e){var t=e;if(t.lastIndexOf(".")>t.lastIndexOf("/")){t=t.split(".");var i=t.pop();t=t.join(".")+"/"+i}return t})),require(o,i)):(r["default"].each(o,function(e){n.push(r["default"].get(window,r["default"].camelCase(e)))}),i.apply(void 0,n))}},e.exports=t["default"]});
!function(e,t){if("function"==typeof define&&define.amd)define("ppr.library.utils.object",["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var o={exports:{}};t(o,o.exports),e.pprLibraryUtilsObject=o.exports}}(this,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t["default"]={stringify:function(e){var t=void 0;if("string"==typeof e)return e;try{t=JSON.stringify(e)}catch(o){t=""}return t},parseJSON:function(e){var t=void 0;if("object"===("undefined"==typeof e?"undefined":o(e)))return e;try{t=JSON.parse(e)}catch(r){t={}}return t}},e.exports=t["default"]});
!function(e,t){if("function"==typeof define&&define.amd)define("ppr.library.utils.request",["module","exports","lodash"],t);else if("undefined"!=typeof exports)t(module,exports,require("lodash"));else{var r={exports:{}};t(r,r.exports,e._),e.pprLibraryUtilsRequest=r.exports}}(this,function(e,t,r){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=u(r);t["default"]={query:{},getQueryParam:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments[2],u=this.getQueryParams(r);return Object.prototype.hasOwnProperty.call(u,e)?u[e]:t},getQueryParams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,t={},r=e.indexOf("?");if(Object.prototype.hasOwnProperty.call(this.query,e))return this.query[e];if(r===-1)return t;var u=e.substring(r+1),n=u.split("&");return i["default"].each(n,function(e){var r=e.split("=");t[r[0]]=r[1]}),this.query[e]=t,t}},e.exports=t["default"]});
!function(e,t){if("function"==typeof define&&define.amd)define("ppr.library.utils.storage",["module","exports","ppr.config"],t);else if("undefined"!=typeof exports)t(module,exports,require("ppr.config"));else{var o={exports:{}};t(o,o.exports,e.pprConfig),e.pprLibraryUtilsStorage=o.exports}}(this,function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(o),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t["default"]={configList:Object.assign({enabled:!0},r["default"].get("storage",{})),isEnabled:function(){return this.configList.enabled===!0&&this.isSupported()},isSupported:function(){return"undefined"!=typeof window.localStorage},set:function(e,t){if(!this.isEnabled())return null;var o=t;if("object"===("undefined"==typeof o?"undefined":i(o)))try{o=JSON.stringify(o)}catch(n){o=""}return window.localStorage.setItem(e,o),!0},get:function(e){if(!this.isEnabled())return null;var t=window.localStorage.getItem(e);try{t=JSON.parse(t)}catch(o){}return t}},e.exports=t["default"]});
!function(e,t){if("function"==typeof define&&define.amd)define("ppr.library.utils.string",["module","exports","lodash","jquery"],t);else if("undefined"!=typeof exports)t(module,exports,require("lodash"),require("jquery"));else{var r={exports:{}};t(r,r.exports,e._,e.$),e.pprLibraryUtilsString=r.exports}}(this,function(e,t,r,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(r),i=n(a);t["default"]={generateHash:function(e){var t=0,r=void 0,a=void 0,n=void 0;if(0===e.length)return t;for(r=0,n=e.length;r<n;r+=1)a=e.charCodeAt(r),t=(t<<32)-t+a,t|=0;return t},getAsPlainText:function(e){return(0,i["default"])("<p>").html(e).text()},linkifyHashTags:function(e,t){var r={twitter:"https://twitter.com/hashtag/",facebook:"https://www.facebook.com/hashtag/",instagram:"https://www.instagram.com/explore/tags/"},a=t.toLowerCase();if("undefined"==typeof r[a])return e;var n=r[a],o=e.replace(/[#]+[A-Za-z0-9-_äöåÄÖÅ]+/g,function(e){var t=e.replace("#",""),r=(0,i["default"])("<a>").attr("class","hashtag").attr("href",n+t).attr("target","_blank").text(e);return r[0].outerHTML});return o},replaceVariablesWithParameters:function(e,t){var r=e;return o["default"].each(t,function(e,t){r=r.replace(":"+t,e)}),r}},e.exports=t["default"]});
!function(t,e){if("function"==typeof define&&define.amd)define("ppr.library.utils.window",["module","exports","jquery","lodash","ppr.config"],e);else if("undefined"!=typeof exports)e(module,exports,require("jquery"),require("lodash"),require("ppr.config"));else{var i={exports:{}};e(i,i.exports,t.$,t._,t.pprConfig),t.pprLibraryUtilsWindow=i.exports}}(this,function(t,e,i,n,r){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=o(i),s=o(n),f=o(r);e["default"]={configList:a["default"].extend(!0,{breakpoints:{},mobile_breakpoints:[]},f["default"].get("window",{})),isBreakpoint:function(t){return"undefined"!=typeof this.configList.breakpoints[t]},isMobile:function u(){var t=this,u=!1;return s["default"].each(this.configList.mobile_breakpoints,function(e){u||(u=t.matchBreakpoint(e))}),u},matchBreakpoint:function(t){if(!this.isBreakpoint(t))return!1;if("function"!=typeof window.matchMedia)return!1;var e=this.configList.breakpoints[t],i=s["default"].replace(e,/[<>]/,"").trim();return s["default"].startsWith(e,"<")?window.matchMedia("(max-width: "+i+"px)").matches:!!s["default"].startsWith(e,">")&&window.matchMedia("(min-width: "+i+"px)").matches},transformations:function(t){return{"-webkit-transform":t,"-moz-transform":t,"-ms-transform":t,"-o-transform":t,transform:t}},whichTransitionEvent:function(){var t=document.createElement("fakeelement"),e={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var i in e)if(void 0!==t.style[i])return e[i];return null}},t.exports=e["default"]});
!function(t,e){if("function"==typeof define&&define.amd)define("ppr.translation",["module","exports","lodash","ppr.config","ppr.library.utils.string"],e);else if("undefined"!=typeof exports)e(module,exports,require("lodash"),require("ppr.config"),require("ppr.library.utils.string"));else{var i={exports:{}};e(i,i.exports,t._,t.pprConfig,t.pprLibraryUtilsString),t.pprTranslation=i.exports}}(this,function(t,e,i,n,r){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var s=a(i),l=a(n),u=a(r),o={isInitialized:!1,language:void 0,translationList:void 0,initialize:function(){this.language=l["default"].get("language","en"),this.translationList=l["default"].get("translations",{})},getAll:function(){return this.isInitialized||this.initialize(),this.translationList},getLanguage:function(t){return"undefined"!=typeof t?t:this.language},getPrefixedKey:function(t,e){return t+"."+e},translate:function(t,e,i){this.isInitialized||this.initialize();var n=this.getPrefixedKey(this.getLanguage(i),t),r=s["default"].result(this.translationList,n,t);return"undefined"!=typeof e&&(r=u["default"].replaceVariablesWithParameters(r,e)),r}};e["default"]={getAll:function(){return o.getAll()},translate:function(t,e,i){return o.translate(t,e,i)}},t.exports=e["default"]});
!function(t,e){if("function"==typeof define&&define.amd)define("ppr.library.utils.date",["module","exports","ppr.translation"],e);else if("undefined"!=typeof exports)e(module,exports,require("ppr.translation"));else{var n={exports:{}};e(n,n.exports,t.pprTranslation),t.pprLibraryUtilsDate=n.exports}}(this,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(n),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e["default"]={getAsDate:function(t){if("object"===("undefined"==typeof t?"undefined":a(t)))return t;if("number"==typeof t)return new Date(t);var e=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2}) ([0-9]{2}):([0-9]{2}):([0-9]{2})$/,"g");return null!==e?new Date(e[1],e[2]-1,e[3],e[4],e[5],e[6]):(e=t.match(/^([0-9]{2}).([0-9]{1,2}).([0-9]{4}) ([0-9]{1,2}):([0-9]{2}):([0-9]{2})$/,"g"),null!==e?new Date(e[3],e[2]-1,e[1],e[4],e[5],e[6]):new Date(t))},getDifference:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=this.getAsDate(t),r=this.getAsDate(e);return(r.getTime()-n.getTime())/1e3},getAsDifferenceString:function(t){return t<60?Math.floor(t)+o["default"].translate("date.sec_ago"):t<3600?Math.floor(t/60)+o["default"].translate("date.min_ago"):t<86400?Math.floor(t/60/60)+o["default"].translate("date.hour_ago"):Math.floor(t/60/60/24)+o["default"].translate("date.day_ago")},formatDate:function(t){var e=t.getFullYear().toString(),n=(t.getMonth()+1).toString(),r=t.getDate().toString(),o=t.getHours()<10?"0"+t.getHours():t.getHours(),a=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes();return r+"."+n+"."+e+" klo "+o+":"+a}},t.exports=e["default"]});
!function(r,e){if("function"==typeof define&&define.amd)define("ppr.library.utils",["module","exports","ppr.library.utils.date","ppr.library.utils.loader","ppr.library.utils.object","ppr.library.utils.request","ppr.library.utils.storage","ppr.library.utils.string","ppr.library.utils.window"],e);else if("undefined"!=typeof exports)e(module,exports,require("ppr.library.utils.date"),require("ppr.library.utils.loader"),require("ppr.library.utils.object"),require("ppr.library.utils.request"),require("ppr.library.utils.storage"),require("ppr.library.utils.string"),require("ppr.library.utils.window"));else{var i={exports:{}};e(i,i.exports,r.pprLibraryUtilsDate,r.pprLibraryUtilsLoader,r.pprLibraryUtilsObject,r.pprLibraryUtilsRequest,r.pprLibraryUtilsStorage,r.pprLibraryUtilsString,r.pprLibraryUtilsWindow),r.pprLibraryUtils=i.exports}}(this,function(r,e,i,t,l,p,a,s,u){"use strict";function o(r){return r&&r.__esModule?r:{"default":r}}Object.defineProperty(e,"__esModule",{value:!0});var d=o(i),b=o(t),y=o(l),n=o(p),f=o(a),U=o(s),q=o(u);e["default"]={DateUtils:d["default"],UniversalLoader:b["default"],ObjectUtils:y["default"],Request:n["default"],Storage:f["default"],StringUtils:U["default"],WindowUtils:q["default"]},r.exports=e["default"]});
!function(e,r){if("function"==typeof define&&define.amd)define("ppr.library",["module","exports","ppr.library.eventbusprototype","ppr.library.utils"],r);else if("undefined"!=typeof exports)r(module,exports,require("ppr.library.eventbusprototype"),require("ppr.library.utils"));else{var t={exports:{}};r(t,t.exports,e.pprLibraryEventbusprototype,e.pprLibraryUtils),e.pprLibrary=t.exports}}(this,function(e,r,t,p){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=i(t),u=i(p);r["default"]={EventBusPrototype:o["default"],Utils:u["default"]},e.exports=r["default"]});
!function(e,t){if("function"==typeof define&&define.amd)define("ppr.page.baseprototype",["module","exports","jquery","lodash","ppr.config","ppr.library.utils.object","ppr.library.utils.loader","ppr.library.eventbusprototype"],t);else if("undefined"!=typeof exports)t(module,exports,require("jquery"),require("lodash"),require("ppr.config"),require("ppr.library.utils.object"),require("ppr.library.utils.loader"),require("ppr.library.eventbusprototype"));else{var n={exports:{}};t(n,n.exports,e.$,e._,e.pprConfig,e.pprLibraryUtilsObject,e.pprLibraryUtilsLoader,e.pprLibraryEventbusprototype),e.pprPageBaseprototype=n.exports}}(this,function(e,t,n,o,i,r,u,s){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var d=a(n),l=a(o),c=a(i),f=a(r),h=a(u),b=a(s),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),v=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p(this,e),this.node=t,this.name=n.name||null,this.data=null,this.eventBus=new b["default"],this.components={},this.cacheComponentReady=[],this.node.attr("data-page-data")&&(this.data=Object.assign({},this.data,f["default"].parseJSON(this.node.attr("data-page-data"))))}return m(e,[{key:"afterBuild",value:function(){this.setDefaultSubscribers(),this.buildComponents(this.node),this.buildUIExtensions()}},{key:"build",value:function(){return!0}},{key:"buildComponent",value:function(e){var t=this,n=void 0,o=e.attr("data-component").trim(),i=l["default"].replace(l["default"].snakeCase(o),"_","-"),r={},u={};return o.length>0?(n="ppr.component."+i,u.custom=!0):e.attr("data-component-href")?(n="ppr.component.reloadableprototype",o="reloadable_prototype"):(n="ppr.component.baseprototype",o="base_prototype"),e.attr("data-component-id")?r.id=e.attr("data-component-id"):r.id=l["default"].uniqueId("Component_"),("undefined"==typeof this.components[r.id]||!this.components[r.id].isBuilt)&&(r.name=o,r.eventBus=this.eventBus,r.page=this,h["default"].load(n,u,function(n){if("undefined"!=typeof n){var o=new n(e,r);t.components[r.id]=o;var i=o.getRequiredModules(),u=l["default"].map(i,function(e){return"ppr.module."+e});h["default"].load(u,{custom:!0},function(){for(var n=arguments.length,u=Array(n),s=0;s<n;s++)u[s]=arguments[s];var a={};l["default"].each(u,function(e,n){e.initialize({},t.eventBus),a[i[n]]=e.getMessages()}),o.setModuleMessages(a),o.isBuildable().then(function(n){return o.build(n)===!1?(delete t.components[r.id],void e.remove()):void o.afterBuild()})})}}),!0)}},{key:"buildComponents",value:function(e){var t=this;e.find("[data-component]").each(function(e,n){return t.eventBus.publish("build_component",(0,d["default"])(n))})}},{key:"buildUIExtensions",value:function(){h["default"].load(c["default"].get("ui.builders",[]),{custom:!0},function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];l["default"].each(t,function(e){e.initialize()})})}},{key:"getComponent",value:function(e){return"undefined"!=typeof this.components[e]?this.components[e]:null}},{key:"onComponentBuildFinished",value:function(e){this.cacheComponentReady.push(e),this.cacheComponentReady.length===l["default"].keys(this.components).length&&this.eventBus.publish("page_build_finished")}},{key:"removeComponent",value:function(e){var t=this,n=e;"string"==typeof e&&(n=[e]),l["default"].each(n,function(e){var n=t.components[e];"undefined"!=typeof n&&(n.reset(),n.node.remove(),delete t.components[e])})}},{key:"setDefaultSubscribers",value:function(){this.eventBus.subscribe(this,"remove_component",this.removeComponent),this.eventBus.subscribe(this,"build_components",this.buildComponents),this.eventBus.subscribe(this,"build_component",this.buildComponent),this.eventBus.subscribe(this,"build_extensions",this.buildUIExtensions),this.eventBus.subscribe(this,"component_build_finished",this.onComponentBuildFinished)}}]),e}();t["default"]=v,e.exports=t["default"]});
!function(e,t){if("function"==typeof define&&define.amd)define("ppr.page",["module","exports","ppr.page.baseprototype"],t);else if("undefined"!=typeof exports)t(module,exports,require("ppr.page.baseprototype"));else{var p={exports:{}};t(p,p.exports,e.pprPageBaseprototype),e.pprPage=p.exports}}(this,function(e,t,p){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(p);t["default"]={BasePrototype:r["default"]},e.exports=t["default"]});
!function(e,t){if("function"==typeof define&&define.amd)define("ppr.component.baseprototype",["module","exports","jquery","lodash","ppr.library.utils.object"],t);else if("undefined"!=typeof exports)t(module,exports,require("jquery"),require("lodash"),require("ppr.library.utils.object"));else{var n={exports:{}};t(n,n.exports,e.$,e._,e.pprLibraryUtilsObject),e.pprComponentBaseprototype=n.exports}}(this,function(e,t,n,i,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=r(n),u=r(i),d=r(a),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),this.node=t,this.id=n.id||u["default"].uniqueId("Component_"),this.name=n.name||null,this.eventBus=n.eventBus||null,this.page=n.page||null,this.cacheData=this.data,this.children=void 0,this.data={},this.parent=void 0,this.messages={},this.isBuilt=!1,this.node.attr({"data-component":this.name,"data-component-id":this.id}),this.node.attr("data-component-data")&&(this.data=Object.assign({},this.data,d["default"].parseJSON(this.node.attr("data-component-data"))))}return l(e,[{key:"afterBuild",value:function(){this.eventBus.publish("component_build_finished",this.id),this.isBuilt=!0}},{key:"build",value:function(){return!0}},{key:"getChildren",value:function(){var e=this;"undefined"==typeof this.children&&!function(){var t=[];u["default"].each(e.node.find("[data-component]"),function(n){var i=(0,s["default"])(n).attr("data-component-id"),a=e.page.getComponent(i);a.getParent().id===e.id&&t.push(i)}),e.children=t}();var t=[];return u["default"].each(this.children,function(n){t.push(e.page.getComponent(n))}),t}},{key:"getParent",value:function(){if("undefined"!=typeof this.parent)return this.page.getComponent(this.parent);var e=this.node.parents("[data-component]:first"),t=null;return e.length&&(t=e.attr("data-component-id")),this.parent=t,this.page.getComponent(this.parent)}},{key:"getRequiredModules",value:function(){return[]}},{key:"isBuildable",value:function(){return s["default"].Deferred().resolve().promise()}},{key:"reset",value:function(){this.data=s["default"].extend(!0,{},this.cacheData),this.href=null,this.isBuilt=!1,this.eventBus.unsubscribeByScope(this)}},{key:"setModuleMessages",value:function(e){this.messages=e}}]),e}();t["default"]=p,e.exports=t["default"]});
!function(e,t){if("function"==typeof define&&define.amd)define("ppr.component.reloadableprototype",["module","exports","jquery","ppr.component.baseprototype"],t);else if("undefined"!=typeof exports)t(module,exports,require("jquery"),require("ppr.component.baseprototype"));else{var o={exports:{}};t(o,o.exports,e.$,e.pprComponentBaseprototype),e.pprComponentReloadableprototype=o.exports}}(this,function(e,t,o,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var p=r(o),u=r(n),l=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),d=function(e){function t(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o));return n.href=null,n.node.attr("data-component-href")&&(n.href=n.node.attr("data-component-href")),n.componentLoaderWrapper=null,n}return s(t,e),l(t,[{key:"afterBuild",value:function(){this.componentLoaderWrapper=this.node.find(".component-loader__wrapper"),this.eventBus.subscribe(this,"reload",this.reload,this.id),this.eventBus.subscribe(this,"reload_started",this.onReloadStarted,this.id),this.eventBus.subscribe(this,"reload_ready",this.onReloadReady,this.id),this.eventBus.subscribe(this,"reload_components",this.reload),this.eventBus.publish("component_build_finished",this.id),this.isBuilt=!0}},{key:"onReloadStarted",value:function(){this.componentLoaderWrapper.length&&this.componentLoaderWrapper.addClass("component-loader__wrapper--active")}},{key:"onReloadReady",value:function(e){var t=e.filter("*:not(text):not(comment)");this.reset(),this.node.replaceWith(t),t.attr("data-component-id",this.id),this.eventBus.publish("build_component",t)}},{key:"reload",value:function(){var e=this;this.eventBus.publishTo(this.id,"reload_started"),p["default"].get(this.href).done(function(t){e.eventBus.publishTo(e.id,"reload_ready",(0,p["default"])(t))})}}]),t}(u["default"]);t["default"]=d,e.exports=t["default"]});
!function(e,o){if("function"==typeof define&&define.amd)define("ppr.component",["module","exports","ppr.component.baseprototype","ppr.component.reloadableprototype"],o);else if("undefined"!=typeof exports)o(module,exports,require("ppr.component.baseprototype"),require("ppr.component.reloadableprototype"));else{var p={exports:{}};o(p,p.exports,e.pprComponentBaseprototype,e.pprComponentReloadableprototype),e.pprComponent=p.exports}}(this,function(e,o,p,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(o,"__esModule",{value:!0});var n=r(p),a=r(t);o["default"]={BasePrototype:n["default"],ReloadablePrototype:a["default"]},e.exports=o["default"]});
!function(e,t){if("function"==typeof define&&define.amd)define("ppr.module.baseprototype",["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var n={exports:{}};t(n,n.exports),e.pprModuleBaseprototype=n.exports}}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(){function e(){n(this,e)}return o(e,null,[{key:"initialize",value:function(e,t){this.eventBus=t,this.configList=Object.assign({},{},e),this.messages={}}},{key:"build",value:function(){return!0}},{key:"getMessages",value:function(){return this.messages}}]),e}();t["default"]=i,e.exports=t["default"]});
!function(e,o){if("function"==typeof define&&define.amd)define("ppr.module",["module","exports","ppr.module.baseprototype"],o);else if("undefined"!=typeof exports)o(module,exports,require("ppr.module.baseprototype"));else{var t={exports:{}};o(t,t.exports,e.pprModuleBaseprototype),e.pprModule=t.exports}}(this,function(e,o,t){"use strict";function p(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(o,"__esModule",{value:!0});var r=p(t);o["default"]={BasePrototype:r["default"]},e.exports=o["default"]});
!function(e,t){if("function"==typeof define&&define.amd)define("ppr.ui.builderprototype",["module","exports","ppr.library.utils.loader"],t);else if("undefined"!=typeof exports)t(module,exports,require("ppr.library.utils.loader"));else{var r={exports:{}};t(r,r.exports,e.pprLibraryUtilsLoader),e.pprUiBuilderprototype=r.exports}}(this,function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=n(r),o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=function(){function e(){i(this,e)}return o(e,[{key:"build",value:function(){return!1}}],[{key:"initialize",value:function(){if(!this.shouldBuild())return!1;var e=this.getDependencies(),t=new this;return u["default"].load(e,{custom:!0},function(){t.build.apply(t,arguments)}),!0}},{key:"shouldBuild",value:function(){return!0}},{key:"getDependencies",value:function(){return[]}}]),e}();t["default"]=l,e.exports=t["default"]});
!function(e,t){if("function"==typeof define&&define.amd)define("ppr.ui",["module","exports","ppr.ui.builderprototype"],t);else if("undefined"!=typeof exports)t(module,exports,require("ppr.ui.builderprototype"));else{var r={exports:{}};t(r,r.exports,e.pprUiBuilderprototype),e.pprUi=r.exports}}(this,function(e,t,r){"use strict";function p(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=p(r);t["default"]={BuilderPrototype:o["default"]},e.exports=t["default"]});
!function(e,t){if("function"==typeof define&&define.amd)define("ppr",["module","exports","jquery","lodash","ppr.library.utils.loader","ppr.config"],t);else if("undefined"!=typeof exports)t(module,exports,require("jquery"),require("lodash"),require("ppr.library.utils.loader"),require("ppr.config"));else{var r={exports:{}};t(r,r.exports,e.$,e._,e.pprLibraryUtilsLoader,e.pprConfig),e.ppr=r.exports}}(this,function(e,t,r,a,i,o){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=u(r),f=u(a),d=u(i),p=u(o);t["default"]={build:function(){this.buildPage()},buildPage:function(){var e=this,t=(0,n["default"])("body"),r={},a={},i="ppr.page.baseprototype",o=t.attr("data-page");"undefined"!=typeof o&&o.length>0?(i="ppr.page."+f["default"].replace(f["default"].snakeCase(o.trim()),"_","-"),a.custom=!0):o="base_prototype",r.name=o,d["default"].load(i,a,function(a){var i=new a(t,r);e.page_instance=i,i.build(),i.afterBuild()})},loadConfig:function(e){var t=this,r=n["default"].Deferred();return n["default"].ajax({dataType:"json",url:e,success:function(e){t.setConfig(e),r.resolve(e)},fail:function(){r.reject("Load configuration failed")}}),r.promise()},setConfig:function(e){f["default"].each(e,function(e,t){p["default"].set(t,e)})}},e.exports=t["default"]});